<!-- FORCE DEPLOY -->
<!DOCTYPE html>
<html>
<head>
<title>MyClothing | Shop & Recharge</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<style>
body{font-family:Arial;margin:0;background:#f2f2f2}
header{background:#000;color:#fff;padding:15px;text-align:center}
section{padding:15px}
.box{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,select,button{width:100%;padding:10px;margin:6px 0}
button{background:#000;color:#fff;border:none}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.card{background:#fff;padding:10px;border-radius:8px}
.card img{width:100%;height:180px;object-fit:cover}
.whatsapp{background:#25D366;margin-top:5px}
</style>
</head>

<body>

<header>
<h2>MyClothing Store</h2>
</header>

<section class="box">
<h3>Add Product (Admin)</h3>
<input id="pname" placeholder="Product Name">
<input id="pprice" type="number" placeholder="Price">
<select id="pcat">
<option>Men</option>
<option>Women</option>
<option>Electronics</option>
</select>
<input type="file" id="pimg" accept="image/*">
<button onclick="addProduct()">Add Product</button>
</section>

<section>
<h3>Products</h3>
<div class="products" id="productList"></div>
</section>

<section class="box">
<h3>Mobile Recharge / Bill Pay</h3>
<input id="mobile" placeholder="Mobile / Bill Number">
<input id="ramount" type="number" placeholder="Amount">
<button onclick="pay('Recharge')">Pay & Submit</button>
</section>

<section class="box">
<h3>Add Money to Wallet</h3>
<input id="wamount" type="number" placeholder="Amount">
<button onclick="pay('Wallet')">Add Money</button>
</section>

<script>
const WHATSAPP="6350390399";
let products=JSON.parse(localStorage.getItem("products"))||[];

function showProducts(){
let list=document.getElementById("productList");
list.innerHTML="";
products.forEach(p=>{
let msg=`Order Request\n${p.name}\n₹${p.price}`;
let url=`https://wa.me/91${WHATSAPP}?text=${encodeURIComponent(msg)}`;
list.innerHTML+=`
<div class="card">
<img src="${p.image}">
<h4>${p.name}</h4>
<p>${p.category}</p>
<b>₹${p.price}</b>
<a href="${url}" target="_blank">
<button class="whatsapp">Order on WhatsApp</button>
</a>
</div>`;
});
}

function addProduct(){
let reader=new FileReader();
let img=document.getElementById("pimg").files[0];
reader.onload=()=>{
products.push({
name:pname.value,
price:pprice.value,
category:pcat.value,
image:reader.result
});
localStorage.setItem("products",JSON.stringify(products));
showProducts();
};
reader.readAsDataURL(img);
}

function pay(type){
let amt= type=="Wallet"?wamount.value:ramount.value;
var options={
key:"rzp_test_1234567890",
amount:amt*100,
currency:"INR",
name:"MyClothing",
description:type,
handler:function(res){
alert("Payment Successful");
let msg=`Payment Success\nType:${type}\nAmount:₹${amt}\nID:${res.razorpay_payment_id}`;
window.open("https://wa.me/91"+WHATSAPP+"?text="+encodeURIComponent(msg));
}
};
new Razorpay(options).open();
}

showProducts();
</script>

</body>
</html>
